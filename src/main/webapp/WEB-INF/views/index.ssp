<!DOCTYPE html>

<html>
<head>

<script src="/webjars/jquery/2.1.4/jquery.js"></script>


<script type="text/javascript">
    $(function() {
        $.get("http://localhost:8080/querysignature", function( signatures ) {
            populateQuerySignatureSelect( signatures );
        });

        function populateQuerySignatureSelect(signatures) {
            $.each(signatures, function ( idx, signature ) {
                $("#query-signature-dropdown")
                    .append($("<option></option>")
                    .text(signature.name));
            });
        }

        /* submit experiment to REST */
        $("#experiment-form").on( "submit", function( event ) {
            experiment = {};

            experiment["id"] = -1;
            experiment["querySignatureId"] = $("#query-signature-dropdown").val();
            experiment["randomSignatureCount"] = parseInt($("#random-signature-count").val());
            $.ajax({
                url: '/experiment',
                type: 'POST',
                contentType: "text/javascript",
                data: JSON.stringify(experiment),
                dataType: 'json',
                success: function(result){ console.log(result) }
            });

            event.preventDefault();
        });
    });

</script>

<link rel="stylesheet" href="/webjars/bootstrap/3.3.5/css/bootstrap.css" />
<style type="text/css">
    .top-buffer { margin-top: 20px; }
</style>


</head>
<body>

    <div class="container">
    <form id="experiment-form">
        <h1><em>Gene Expression</em> Connectivity Map</h1>

        <h3><em>1</em> Choose a Query Signatures</h3>
        <div class="row">
        <div class="col-md-6"><p>Edit the signature here (possibly?)</p></div>
        <div class="col-md-6">
            <select name="querySignatureId" id="query-signature-dropdown" class="form-control"></select>
        </div>
        </div>

        <h3><em>2</em> Choose a number of random signatures generated for calculating p-values</h3>
        <div class="row">
        <div class="col-md-6"></div>
        <div class="col-md-6"><input name="randomSignatureCount" id="random-signature-count" type="number" class="form-control" value="30000" /></div>
        </div>
        <div class="row top-buffer">
            <div class="col-md-6"></div>
            <div class="col-md-6"><button type="submit" class="btn btn-primary">Submit</button></div>
        </div>
    </form>
    </div>


    </body>
</html>